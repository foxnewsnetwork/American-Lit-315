    <!--Load the Google Chart AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
   
      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});
     
      // Set a callback to run when the Google Visualization API is loaded.
      //google.setOnLoadCallback(drawChart);
    </script>

<!-- Put other stuff in here -->

<div class="container" style="font-size:1.5em; padding-top:0.5em;">
<div class="row">
	<div class="span4">
<h1>
<%= @game.name %>
</h1>
	</div>
    <div class="span4 offset4" style="text-align:right">
		<%= link_to "Edit Record", {:action => "edit", :id => @game.id}, :class=>"btn btn-info btn-large" %>
	</div>
</div>
<hr>
<div class="row">
    <div class="span4">
	
	<h2>
	Earnings
	</h2>
	</div>
    <div class="span4 offset4">
			Start:
            <input id="popupDateFieldStart" style="width:5em" value="<%= @visible_end_date.year %>-<%= @visible_end_date.mon %>-<%= @visible_end_date.day %>">
			End:
            <input id="popupDateFieldEnd" style="width:5em" value="<%= @visible_start_date.year %>-<%= @visible_start_date.mon %>-<%= @visible_start_date.day %>">
			<div class="btn btn-primary btn-large" style="width:5em; margin-left:0.5em" onclick="setNewVR()">Apply</div>
</div>
</div>
<hr>

    <script type='text/javascript'>
      google.load('visualization', '1', {'packages':['annotatedtimeline']});
      google.setOnLoadCallback(drawVisualization);
	function drawVisualization() {
	  // Create and populate the data table.
		var JSONObject = {
	      cols: [
			{id: 'date', label: 'Date', type: 'date'},
          {id: 'earning', label: 'Daily Earning', type: 'number'}
		],
      rows: [
<% @daily_earnings.each do |de| %>
	<%= "{c:[{v: new Date(#{de.created_at.year}, #{de.created_at.mon-1}, #{de.created_at.day})}, 
		{v: #{de.daily_earning}}]}," %>
<% end %>
		]};

  var data = new google.visualization.DataTable(JSONObject, 0.5);

  // Create and draw the visualization.
  visualization = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));
  visualization.draw(data, {'allowHtml': true,'allowRedraw':true, 'displayExactValues':true});
	var today = new Date(<%= @visible_start_date.year %>, <%= @visible_start_date.mon-1 %>, <%= @visible_start_date.day %>);
	var daysago = new Date(<%= @visible_end_date.year %>, <%= @visible_end_date.mon-1 %>, <%= @visible_end_date.day %>);
	visualization.setVisibleChartRange(daysago,today);
}

    </script>
<%= javascript_include_tag 'calendarview' %>
<style type='text/css'>@import url('http://0.0.0.0:3000/stylesheets/calendarview.css');</style>
 <script type="text/javascript">
      window.onload = function() {
        Calendar.setup(
          {
            dateField      : 'popupDateFieldStart',
            triggerElement : 'popupDateFieldStart'
          }
        )
        Calendar.setup(
          {
            dateField      : 'popupDateFieldEnd',
            triggerElement : 'popupDateFieldEnd'
          }
        )
		
      }

		
		function setNewVR( ){
			var start_str = jQuery("#popupDateFieldStart").val().split('-');
			var end_str = jQuery("#popupDateFieldEnd").val().split('-');
	
			var start_date = new Date(Number(start_str[0]),Number(start_str[1])-1,Number(start_str[2]) ) ;
			var end_date = new Date(Number(end_str[0]),Number(end_str[1])-1 ,Number(end_str[2]) ) ;
var JSONObject = {
	      cols: [
			{id: 'date', label: 'Date', type: 'date'},
          {id: 'earning', label: 'Daily Earning', type: 'number'}
		],
      rows: [
<% @daily_earnings.each do |de| %>
	<%= "{c:[{v: new Date(#{de.created_at.year}, #{de.created_at.mon-1}, #{de.created_at.day})}, 
		{v: #{de.daily_earning}}]}," %>
<% end %>
		]};

			var data = new google.visualization.DataTable(JSONObject, 0.5);
			var visualization = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));
			visualization.draw(data, {'allowHtml': true, 'allowRedraw':true,'displayExactValues':true});
			visualization.setVisibleChartRange(start_date,end_date);
			
		}

    </script>
<div id='chart_div' style='width: 100%; height: 300px;'></div>
<br>
<table class="table">
<thead>
<tr>
<th style="text-align:center">
	5 Day Earning
</th>
<th style="text-align:center">
	30 Day Earning
</th>
<th style="text-align:center">
	Total Earning
</th>
</tr>
</thead>
<tbody>
<tr>
	<td style="text-align:center">
	<%= number_to_currency @fivedays %>
	</td>
	<td style="text-align:center">
	<%= number_to_currency @thirtydays %>
	</td>
	<td style="text-align:center">
	<%= number_to_currency @totaldays %>
	</td>
</tr>
</tbody>
</table>
<br>
<br>
<br>
<div>
	<h2>
	Impressions
	</h2>
<hr>
<%= @game.impressions %>
</div>
<br>
<br>
<br>

<div>
	<h2>
	Meta Data
	</h2>
<hr>
	<%= @game.meta_data %>
</div>
<br>
<br>
<br>

<div>
	<h2>
	Simple Android SDK
	</h2>
<hr>
<pre>
	<%= @game.token %>
</pre>
</div>
<br>
<br>
<br>

<div>
	<h2>
	Simple HTML5 SDK
	</h2>
<hr>
<pre>
	Coming soon..
</pre>
</div>
<br>
<br>
<br>

<div>
	<h2>
	Token
	</h2>
<hr>
<pre>
	<%= @game.token %>
</pre>
</div>
<br>

<div>
			<%= link_to "New Token", { :action => "new_token", :publisher_id => current_publisher.id, :game_id => @game.id }, :class=>"btn btn-danger" %>
WARNING: For REST API only! Update your SDK's token accordingly or things might break.
</div>
<br>
<br>
<br>
<br>
</div>
